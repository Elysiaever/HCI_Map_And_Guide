<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>济事楼4楼导览系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!--Tailwind 是一个功能类优先的 CSS 框架，通过预定义的类名可以快速构建自定义界面，无需编写传统的 CSS。-->
    <link
      href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <!--引入font-awesome图标库，带有一些流行的图标-->

    <!-- Tailwind 配置 -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#2563eb",
              secondary: "#4f46e5",
              accent: "#3b82f6",
              neutral: "#f3f4f6",
              "neutral-dark": "#1f2937",
            },
            fontFamily: {
              inter: ["Inter", "system-ui", "sans-serif"],
            },
          },
        },
      };
    </script>

    <style type="text/tailwindcss">
      @layer utilities {
        .content-auto {
          content-visibility: auto;
        }
        .room-hover {
          @apply transition-all duration-300 hover:shadow-lg hover:scale-[1.02] hover:z-10;
        }
        .fade-in {
          animation: fadeIn 0.5s ease-in-out;
        }
        .scale-in {
          animation: scaleIn 0.3s ease-out;
        }
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes scaleIn {
        from {
          transform: scale(0.95);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }
    </style>
  </head>
  <body class="font-inter bg-gray-50 text-gray-800 min-h-screen flex flex-col">
    <!-- 导航栏 -->
    <header
      class="bg-gradient-to-r from-primary to-secondary text-white shadow-md sticky top-0 z-50 transition-all duration-300"
    >
      <div
        class="container mx-auto px-4 py-3 flex justify-between items-center"
      >
        <div class="flex items-center space-x-2">
          <i class="fa fa-map-signs text-2xl"></i>
          <h1 class="text-xl md:text-2xl font-bold">济事楼4楼导览系统</h1>
        </div>

        <!-- 搜索框 -->
        <div class="relative w-full md:w-64 lg:w-80">
          <input
            type="text"
            id="search-input"
            placeholder="搜索房间或人员..."
            class="w-full py-2 px-4 pr-10 rounded-full bg-white/20 backdrop-blur-sm border border-white/30 text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 transition-all"
          />
          <button
            id="search-button"
            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-white/80 hover:text-white transition-colors"
          >
            <i class="fa fa-search"></i>
          </button>
        </div>

        <!-- 移动端菜单按钮 -->
        <button id="mobile-menu-button" class="md:hidden text-white text-xl">
          <i class="fa fa-bars"></i>
        </button>
      </div>

      <!-- 移动端菜单 -->
      <div
        id="mobile-menu"
        class="md:hidden bg-white shadow-lg rounded-b-lg mx-4 mt-1 overflow-hidden hidden"
      >
        <div class="p-2">
          <div class="text-neutral-dark font-semibold mb-2">快速导航</div>
          <div class="grid grid-cols-2 gap-2" id="mobile-room-list">
            <!-- 移动端房间列表将通过JS动态生成 -->
          </div>
        </div>
      </div>
    </header>

    <!-- 主内容区 -->
    <main class="flex-grow container mx-auto px-4 py-6">
      <!-- 楼层总览 -->
      <section class="mb-10 fade-in">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-2xl font-bold text-neutral-dark flex items-center">
            <i class="fa fa-building-o mr-2 text-primary"></i>楼层总览
          </h2>
          <div class="hidden md:block">
            <span class="text-sm text-gray-500 mr-2">快速选择:</span>
            <select
              id="room-selector"
              class="bg-white border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50"
            >
              <option value="">选择房间...</option>
              <!-- 房间选项将通过JS动态生成 -->
            </select>
          </div>
        </div>

        <!-- 楼层地图 -->
        <div
          class="bg-white rounded-xl shadow-lg p-4 md:p-6 mb-6 overflow-hidden relative"
        >
          <div
            class="relative aspect-[4/3] bg-neutral rounded-lg overflow-hidden"
          >
            <img
              src="images/overview-1.jpg"
              alt="济事楼4楼平面图"
              class="w-full h-full object-cover opacity-90"
            />

            <!-- 房间标记 - 这些将通过JS动态定位 -->
            <div id="room-markers" class="absolute inset-0">
              <!-- 房间标记将通过JS动态生成 -->
            </div>
          </div>

          <!-- 图例 -->
          <div class="flex flex-wrap gap-4 mt-4 text-sm">
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-green-500 mr-2"></div>
              <span>空闲</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-yellow-500 mr-2"></div>
              <span>正在使用</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-red-500 mr-2"></div>
              <span>维护中</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-blue-500 mr-2"></div>
              <span>当前选中</span>
            </div>
          </div>
        </div>

        <!-- 房间卡片网格 -->
        <div
          id="rooms-grid"
          class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"
        >
          <!-- 房间卡片将通过JS动态生成 -->
        </div>
      </section>

      <!-- 房间详情 -->
      <section id="room-detail-section" class="mb-10 hidden scale-in">
        <div class="flex justify-between items-center mb-4">
          <h2
            id="room-detail-title"
            class="text-2xl font-bold text-neutral-dark flex items-center"
          >
            <i class="fa fa-door-o mr-2 text-primary"></i><span>房间详情</span>
          </h2>
          <button
            id="back-to-overview"
            class="text-primary hover:text-primary/80 transition-colors flex items-center"
          >
            <i class="fa fa-arrow-left mr-1"></i> 返回总览
          </button>
        </div>

        <div
          id="room-detail-content"
          class="bg-white rounded-xl shadow-lg p-6 overflow-hidden"
        >
          <!-- 房间详情内容将通过JS动态生成 -->
        </div>
      </section>

      <!-- 搜索结果 -->
      <section id="search-results-section" class="mb-10 hidden fade-in">
        <div class="flex justify-between items-center mb-4">
          <h2
            id="search-results-title"
            class="text-2xl font-bold text-neutral-dark flex items-center"
          >
            <i class="fa fa-search mr-2 text-primary"></i><span>搜索结果</span>
          </h2>
          <button
            id="back-from-search"
            class="text-primary hover:text-primary/80 transition-colors flex items-center"
          >
            <i class="fa fa-arrow-left mr-1"></i> 返回总览
          </button>
        </div>

        <div
          id="search-results-content"
          class="bg-white rounded-xl shadow-lg p-6 overflow-hidden"
        >
          <!-- 搜索结果内容将通过JS动态生成 -->
        </div>
      </section>
    </main>

    <!-- 页脚 -->
    <footer class="bg-neutral-dark text-white py-6">
      <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <div class="mb-4 md:mb-0">
            <div class="flex items-center space-x-2">
              <i class="fa fa-map-signs text-xl"></i>
              <span class="font-bold text-lg">济事楼导览系统</span>
            </div>
            <p class="text-sm text-gray-400 mt-1">带你探索济事楼的每个角落</p>
          </div>

          <div class="flex space-x-6">
            <a
              href="#"
              class="text-gray-400 hover:text-white transition-colors"
            >
              <i class="fa fa-question-circle"></i> 帮助
            </a>
            <a
              href="#"
              class="text-gray-400 hover:text-white transition-colors"
            >
              <i class="fa fa-info-circle"></i> 关于
            </a>
            <a
              href="#"
              class="text-gray-400 hover:text-white transition-colors"
            >
              <i class="fa fa-envelope"></i> 联系我们
            </a>
          </div>
        </div>

        <div
          class="border-t border-gray-700 mt-6 pt-6 text-center text-sm text-gray-400"
        >
          &copy; 2025 济事楼导览系统 | 版权所有
        </div>
      </div>
    </footer>

    <script>
      // 模拟数据
      const rooms = [
        {
          id: "济事楼407",
          name: "研究生工作室",
          position: { x: "66.7%", y: "51.7%" },
          status: "vacant",
          description: "科研活动、办公",
          image: ["images/407.jpg", "images/407_door.jpg"],
          people: [
            {
              name: "陈梁",
              role: "实验中心负责人",
              tel: "69589847",
              avatar: "https://picsum.photos/seed/person1/100/100",
            },
            {
              name: "严海洲",
              role: "实验室安全负责人",
              tel: "13918378240",
              avatar: "https://picsum.photos/seed/person2/100/100",
            },
            {
              name: "叶柯男",
              role: "实验室安全员",
              tel: null,
              avatar: "https://picsum.photos/seed/person3/100/100",
            },
          ],
        },
        {
          id: "济事楼408",
          name: "研究生工作室",
          position: { x: "77.2%", y: "61.4%" },
          status: "using",
          description: "科研活动、办公",
          image: ["images/408.jpg", "images/408_door.jpg,"],
          people: [],
        },
        {
          id: "济事楼410",
          name: "教研室",
          position: { x: "73.3%", y: "67.2%" },
          status: "using",
          description:
            "教师日常办公和开展教学研讨的专业场所。这里配备了完善的办公设施和教学资源，为教师提供了一个集教学、科研和交流于一体的工作环境。",
          image: ["images/410.jpg", "images/410_door.jpg"],
          people: [
            {
              name: "王冬青",
              role: "教师",
              tell: null,
              avatar: "https://picsum.photos/seed/person4/100/100",
            },
            {
              name: "李江峰",
              role: "教师",
              tell: null,
              avatar: "https://picsum.photos/seed/person5/100/100",
            },
            {
              name: "夏波涌",
              role: "教师",
              tell: null,
              avatar: "https://picsum.photos/seed/person6/100/100",
            },
            {
              name: "张颖",
              role: "教师",
              tell: null,
              avatar: "https://picsum.photos/seed/person7/100/100",
            },
          ],
        },
        {
          id: "济事楼409R",
          name: "研究生工作室",
          position: { x: "63.2%", y: "57.1%" },
          status: "using",
          description: "科研活动、办公",
          image: ["images/409R.jpg", "images/409R_door.jpg"],
          people: [
            {
              name: "陈梁",
              role: "实验中心负责人",
              tel: "69589847",
              avatar: "https://picsum.photos/seed/person1/100/100",
            },
            {
              name: "杜庆峰",
              role: "实验室安全负责人",
              tel: "18964806609",
              avatar: "https://picsum.photos/seed/person8/100/100",
            },
            {
              name: "叶柯男",
              role: "实验室安全员",
              tel: null,
              avatar: "https://picsum.photos/seed/person3/100/100",
            },
          ],
        },
        {
          id: "济事楼412L",
          name: "教研室",
          position: { x: "70.1%", y: "72.3%" },
          status: "using",
          description:
            "教师日常办公和教学研讨的场所，配备电脑、打印机等办公设备。",
          image: ["images/412L.jpg", "images/412L_door.jpg"],
          people: [
            {
              name: "刘岩",
              role: "教师",
              tell: null,
              avatar: "https://picsum.photos/seed/person9/100/100",
            },
            {
              name: "张惠娟",
              role: "教师",
              tell: null,
              avatar: "https://picsum.photos/seed/person10/100/100",
            },
            {
              name: "孙萍",
              role: "教师",
              tell: null,
              avatar: "https://picsum.photos/seed/person11/100/100",
            },
            {
              name: "罗怡桂",
              role: "教师",
              tell: null,
              avatar: "https://picsum.photos/seed/person12/100/100",
            },
          ],
        },
        {
          id: "济事楼409L",
          name: "研究生工作室",
          position: { x: "59.8%", y: "62.1%" },
          status: "using",
          description: "科研活动、办公",
          image: ["images/409L.jpg", "images/409L_door.jpg"],
          people: [
            {
              name: "陈梁",
              role: "实验中心负责人",
              tel: "69589847",
              avatar: "https://picsum.photos/seed/person1/100/100",
            },
            {
              name: "朱亚萍",
              role: "实验室安全负责人",
              tel: "15195975598",
              avatar: "https://picsum.photos/seed/person13/100/100",
            },
            {
              name: "代玉琢",
              role: "实验室安全员",
              tel: null,
              avatar: "https://picsum.photos/seed/person14/100/100",
            },
          ],
        },
        {
          id: "济事楼414",
          name: "教师",
          position: { x: "52.0%", y: "89.7%" },
          status: "vacant",
          description: "授课、自习",
          image: ["images/414.jpg"],
          people: [],
        },
        {
          id: "济事楼416",
          name: "多媒体教学机房",
          position: { x: "41.2%", y: "89.7%" },
          status: "vacant",
          description: "授课、自习",
          image: ["images/416.jpg", "images/416_door.jpg"],
          people: [
            {
              name: "陈梁",
              role: "实验中心负责人",
              tel: "69589847",
              avatar: "https://picsum.photos/seed/person1/100/100",
            },
            {
              name: "杨旻",
              role: "实验室安全负责人",
              tel: "13918683745",
              avatar: "https://picsum.photos/seed/person15/100/100",
            },
          ],
        },
        {
          id: "济事楼417",
          name: "会议室",
          position: { x: "41.3%", y: "72.2%" },
          status: "using",
          description: "组织会议",
          image: ["images/417.jpg"],
          people: [],
        },
        {
          id: "济事楼418L",
          name: "教授办公室",
          position: { x: "32.9%", y: "89.7%" },
          status: "using",
          description: "",
          image: ["images/418L.jpg", "images/418L_door.jpg"],
          people: [
            {
              name: "张林",
              role: "教授",
              tel: null,
              avatar: "https://picsum.photos/seed/person16/100/100",
            },
            {
              name: "江建慧",
              role: "教授",
              tel: null,
              avatar: "https://picsum.photos/seed/person17/100/100",
            },
            {
              name: "刘琴",
              role: "教授",
              tel: null,
              avatar: "https://picsum.photos/seed/person18/100/100",
            },
          ],
        },
        {
          id: "济事楼418R",
          name: "研究生工作室",
          position: { x: "26.8%", y: "89.7%" },
          status: "using",
          description: "科研活动、办公",
          image: ["images/418R.jpg", "images/418R_door.jpg"],
          people: [
            {
              name: "陈梁",
              role: "实验中心负责人",
              tel: "69589847",
              avatar: "https://picsum.photos/seed/person1/100/100",
            },
            {
              name: "尹长青",
              role: "实验室安全负责人",
              tel: "18901892339",
              avatar: "https://picsum.photos/seed/person19/100/100",
            },
            {
              name: "陈韩悦",
              role: "实验室安全员",
              tel: null,
              avatar: "https://picsum.photos/seed/person20/100/100",
            },
          ],
        },
        {
          id: "济事楼419",
          name: "教学工作室",
          position: { x: "29.8%", y: "72.2%" },
          status: "using",
          description: "科研、教学、实验",
          image: ["images/419.jpg", "images/419_door.jpg"],
          people: [
            {
              name: "陈梁",
              role: "实验中心负责人",
              tel: "69589847",
              avatar: "https://picsum.photos/seed/person1/100/100",
            },
            {
              name: "张晶",
              role: "实验室安全负责人",
              tel: "13916133163",
              avatar: "https://picsum.photos/seed/person21/100/100",
            },
          ],
        },
        {
          id: "济事楼426",
          name: "教学机房",
          position: { x: "7.4%", y: "76.4%" },
          status: "vacant",
          description: "教学",
          image: ["images/426.jpg", "images/426_door.jpg"],
          people: [
            {
              name: "陈梁",
              role: "实验中心负责人",
              tel: "69589847",
              avatar: "https://picsum.photos/seed/person1/100/100",
            },
            {
              name: "杨旻",
              role: "实验室安全负责人",
              tel: "13918683745",
              avatar: "https://picsum.photos/seed/person18/100/100",
            },
          ],
        },
        {
          id: "济事楼428",
          name: "网络与服务器管理室",
          position: { x: "7.5%", y: "70.0%" },
          status: "repairing",
          description: "教学",
          image: ["images/428.jpg", "images/428_door.jpg"],
          people: [
            {
              name: "杨旻",
              role: "课题负责人",
              tel: "13918683745",
              avatar: "https://picsum.photos/seed/person18/100/100",
            },
            {
              name: "严海洲",
              role: "安全负责人",
              tel: "13918378240",
              avatar: "https://picsum.photos/seed/person2/100/100",
            },
          ],
        },
        {
          id: "济事楼430",
          name: "教学机房",
          position: { x: "9.0%", y: "55.1%" },
          status: "vacant",
          description: "教学",
          image: ["images/430.jpg", "images/430_door.jpg"],
          people: [
            {
              name: "陈梁",
              role: "实验中心负责人",
              tel: "69589847",
              avatar: "https://picsum.photos/seed/person1/100/100",
            },
            {
              name: "杨旻",
              role: "实验室安全负责人",
              tel: "13918683745",
              avatar: "https://picsum.photos/seed/person18/100/100",
            },
          ],
        },
        {
          id: "济事楼432",
          name: "党员之家",
          position: { x: "8.6%", y: "39.7%" },
          status: "vacant",
          description: "党建活动",
          image: ["images/432.jpg", "images/432_door.jpg"],
          people: [],
        },
        {
          id: "济事楼434",
          name: "多媒体教室",
          position: { x: "8.6%", y: "36.0%" },
          status: "vacant",
          description: "教学",
          image: ["images/434.jpg", "images/434_door.jpg"],
          people: [],
        },
        {
          id: "济事楼442R",
          name: "学院办公室",
          position: { x: "21.8%", y: "38.8%" },
          status: "using",
          description: "办公",
          image: ["images/442R.jpg", "images/442R_door.jpg"],
          people: [
            {
              name: "闫鹏",
              role: "教师",
              tel: null,
              avatar: "https://picsum.photos/seed/person22/100/100",
            },
            {
              name: "张晶",
              role: "教师",
              tel: null,
              avatar: "https://picsum.photos/seed/person21/100/100",
            },
            {
              name: "林伊凡",
              role: "教师",
              tel: null,
              avatar: "https://picsum.photos/seed/person23/100/100",
            },
            {
              name: "张晓雅",
              role: "教师",
              tel: null,
              avatar: "https://picsum.photos/seed/person24/100/100",
            },
            {
              name: "钱银飞",
              role: "教师",
              tel: null,
              avatar: "https://picsum.photos/seed/person25/100/100",
            },
            {
              name: "王昊榕",
              role: "教师",
              tel: null,
              avatar: "https://picsum.photos/seed/person26/100/100",
            },
            {
              name: "俞晓静",
              role: "教师",
              tel: null,
              avatar: "https://picsum.photos/seed/person27/100/100",
            },
          ],
        },
        {
          id: "济事楼442L",
          name: "教务办公室",
          position: { x: "26.8%", y: "38.8%" },
          status: "using",
          description: "处理教务事务",
          image: ["images/442L.jpg", "images/442L_door.jpg"],
          people: [
            {
              name: "刘梦露",
              role: "教务",
              tel: null,
              avatar: "https://picsum.photos/seed/person28/100/100",
            },
            {
              name: "李慧敏",
              role: "教务",
              tel: null,
              avatar: "https://picsum.photos/seed/person29/100/100",
            },
            {
              name: "王彩霞",
              role: "教务",
              tel: null,
              avatar: "https://picsum.photos/seed/person30/100/100",
            },
            {
              name: "杨丹",
              role: "教务",
              tel: null,
              avatar: "https://picsum.photos/seed/person31/100/100",
            },
            {
              name: "姚仕仪",
              role: "教务",
              tel: null,
              avatar: "https://picsum.photos/seed/person32/100/100",
            },
          ],
        },
        {
          id: "济事楼441",
          name: "会议室",
          position: { x: "28.6%", y: "25.3%" },
          status: "using",
          description: "组织会议",
          image: ["images/441.jpg", "images/441_door.jpg"],
          people: [],
        },
        {
          id: "济事楼443",
          name: "实验中心",
          position: { x: "34.5%", y: "25.3%" },
          status: "using",
          description: "实验",
          image: ["images/443.jpg", "images/443_door.jpg"],
          people: [
            {
              name: "陈梁",
              role: "实验中心负责人",
              tel: null,
              avatar: "https://picsum.photos/seed/person1/100/100",
            },
            {
              name: "杨旻",
              role: "实验室安全负责人",
              tel: null,
              avatar: "https://picsum.photos/seed/person18/100/100",
            },
            {
              name: "严海洲",
              role: "实验室安全负责人",
              tel: null,
              avatar: "https://picsum.photos/seed/person2/100/100",
            },
          ],
        },
        {
          id: "济事楼444",
          name: "档案室",
          position: { x: "31.0%", y: "39.0%" },
          status: "vacant",
          description: "存取档案",
          image: ["images/444.jpg", "images/444_door.jpg"],
          people: [],
        },
        {
          id: "济事楼446",
          name: "学生工作办公室",
          position: { x: "36.0%", y: "38.5%" },
          status: "using",
          description: "处理学生工作、办公",
          image: ["images/446.jpg", "images/446_door.jpg"],
          people: [
            {
              name: "张砚秋",
              role: "",
              tel: null,
              avatar: "https://picsum.photos/seed/person33/100/100",
            },
            {
              name: "丁瑞庭",
              role: "",
              tel: null,
              avatar: "https://picsum.photos/seed/person34/100/100",
            },
            {
              name: "葛蕾",
              role: "",
              tel: null,
              avatar: "https://picsum.photos/seed/person35/100/100",
            },
            {
              name: "焦嘉欣",
              role: "",
              tel: null,
              avatar: "https://picsum.photos/seed/person36/100/100",
            },
            {
              name: "钟梦莹",
              role: "",
              tel: null,
              avatar: "https://picsum.photos/seed/person37/100/100",
            },
            {
              name: "陈璞皎",
              role: "",
              tel: null,
              avatar: "https://picsum.photos/seed/person38/100/100",
            },
          ],
        },
        {
          id: "济事楼448",
          name: "院务助理办公室",
          position: { x: "40.3%", y: "37.4%" },
          status: "using",
          description: "办公",
          image: ["images/448-1.jpg", "images/448-2.jpg", "images/448-3.jpg"],
          people: [
            {
              name: "宋井宽",
              role: "院务助理",
              tel: null,
              avatar: "https://picsum.photos/seed/person39/100/100",
            },
            {
              name: "吴晓培",
              role: "院务助理",
              tel: null,
              avatar: "https://picsum.photos/seed/person40/100/100",
            },
            {
              name: "陈荣",
              role: "院务助理",
              tel: null,
              avatar: "https://picsum.photos/seed/person41/100/100",
            },
          ],
        },
        {
          id: "济事楼450R",
          name: "院长办公室",
          position: { x: "44.6%", y: "35.3%" },
          status: "using",
          description: "院长办公",
          image: ["images/450R.jpg", "images/450R_door.jpg"],
          people: [
            {
              name: "申恒涛",
              role: "院长",
              tel: null,
              avatar: "https://picsum.photos/seed/person42/100/100",
            },
          ],
        },
        {
          id: "济事楼450L",
          name: "党委书记办公室",
          position: { x: "49.9%", y: "30.3%" },
          status: "using",
          description: "党委书记办公",
          image: ["images/450L.jpg", "images/450L_door.jpg"],
          people: [
            {
              name: "熊岚",
              role: "党委书记",
              tel: null,
              avatar: "https://picsum.photos/seed/person43/100/100",
            },
          ],
        },
        {
          id: "济事楼456",
          name: "党员办公室",
          position: { x: "56.8%", y: "12.1%" },
          status: "using",
          description: "党员办公",
          image: ["images/456.jpg", "images/456_door.jpg"],
          people: [
            {
              name: "周微微",
              role: "党员",
              tel: null,
              avatar: "https://picsum.photos/seed/person44/100/100",
            },
            {
              name: "陆凤兰",
              role: "党员",
              tel: null,
              avatar: "https://picsum.photos/seed/person45/100/100",
            },
            {
              name: "赵清理",
              role: "党员",
              tel: null,
              avatar: "https://picsum.photos/seed/person46/100/100",
            },
          ],
        },
        {
          id: "济事楼455",
          name: "会议室",
          position: { x: "49.1%", y: "4.7%" },
          status: "vacant",
          description: "组织会议",
          image: ["images/455.jpg", "images/455_door.jpg"],
          people: [],
        },
        {
          id: "济事楼451",
          name: "副院长办公室",
          position: { x: "42.4%", y: "19.0%" },
          status: "using",
          description: "副院长办公",
          image: ["images/451-1.jpg", "images/451-2.jpg", "images/451-3.jpg"],
          people: [
            {
              name: "王成",
              role: "副院长",
              tel: null,
              avatar: "https://picsum.photos/seed/person47/100/100",
            },
            {
              name: "何良华",
              role: "副院长",
              tel: null,
              avatar: "https://picsum.photos/seed/person48/100/100",
            },
            {
              name: "张林",
              role: "副院长",
              tel: null,
              avatar: "https://picsum.photos/seed/person49/100/100",
            },
          ],
        },
      ];

      // 状态样式映射
      const statusStyles = {
        vacant: { color: "bg-green-500", label: "空闲" },
        using: { color: "bg-yellow-500", label: "正在使用" },
        repairing: { color: "bg-red-500", label: "维护中" },
      };

      // 当前选中的房间ID
      let currentRoomId = null;

      // DOM 元素
      const roomsGrid = document.getElementById("rooms-grid");
      const roomMarkers = document.getElementById("room-markers");
      const roomSelector = document.getElementById("room-selector");
      const mobileRoomList = document.getElementById("mobile-room-list");
      const roomDetailSection = document.getElementById("room-detail-section");
      const roomDetailTitle = document
        .getElementById("room-detail-title")
        .querySelector("span");
      const roomDetailContent = document.getElementById("room-detail-content");
      const backToOverview = document.getElementById("back-to-overview");
      const searchInput = document.getElementById("search-input");
      const searchButton = document.getElementById("search-button");
      const searchResultsSection = document.getElementById(
        "search-results-section"
      );
      const searchResultsTitle = document
        .getElementById("search-results-title")
        .querySelector("span");
      const searchResultsContent = document.getElementById(
        "search-results-content"
      );
      const backFromSearch = document.getElementById("back-from-search");
      const mobileMenuButton = document.getElementById("mobile-menu-button");
      const mobileMenu = document.getElementById("mobile-menu");

      // 初始化页面
      function initPage() {
        renderRoomList();
        renderRoomMarkers();
        renderRoomSelector();
        renderMobileRoomList();

        // 事件监听
        backToOverview.addEventListener("click", showOverview);
        backFromSearch.addEventListener("click", showOverview);
        searchButton.addEventListener("click", performSearch);
        searchInput.addEventListener("keypress", (e) => {
          if (e.key === "Enter") performSearch();
        });
        mobileMenuButton.addEventListener("click", toggleMobileMenu);
      }

      // 渲染房间列表
      function renderRoomList() {
        roomsGrid.innerHTML = "";

        rooms.forEach((room) => {
          const roomCard = document.createElement("div");
          roomCard.className = `bg-white rounded-xl shadow-md overflow-hidden room-hover ${
            currentRoomId === room.id ? "ring-2 ring-primary" : ""
          }`;
          roomCard.dataset.roomId = room.id;

          const statusStyle = statusStyles[room.status];

          roomCard.innerHTML = `
                    <div class="relative">
                        <img src="${room.image[0]}" alt="${
            room.name
          }" class="w-full h-40 object-cover">
                        <div class="absolute top-2 left-2 ${
                          statusStyle.color
                        } text-white text-xs px-2 py-1 rounded-full">
                            ${statusStyle.label}
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-lg mb-1">${room.name} (${
            room.id
          })</h3>
                        <p class="text-gray-600 text-sm line-clamp-2 mb-3">${
                          room.description
                        }</p>
                        <div class="flex justify-between items-center">
                            <div class="flex -space-x-2">
                                ${room.people
                                  .slice(0, 3)
                                  .map(
                                    (person) => `
                                    <img src="${person.avatar}" alt="${person.name}" class="w-6 h-6 rounded-full border-2 border-white">
                                `
                                  )
                                  .join("")}
                                ${
                                  room.people.length > 3
                                    ? `<span class="w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-xs font-medium border-2 border-white">+${
                                        room.people.length - 3
                                      }</span>`
                                    : ""
                                }
                            </div>
                            <button class="text-primary hover:text-primary/80 text-sm font-medium flex items-center">
                                查看详情 <i class="fa fa-arrow-right ml-1"></i>
                            </button>
                        </div>
                    </div>
                `;

          roomCard.addEventListener("click", () => showRoomDetail(room.id));
          roomsGrid.appendChild(roomCard);
        });
      }

      // 渲染楼层地图上的房间标记
      function renderRoomMarkers() {
        roomMarkers.innerHTML = "";

        rooms.forEach((room) => {
          const marker = document.createElement("div");
          const statusStyle = statusStyles[room.status];
          const isSelected = currentRoomId === room.id;

          marker.className = `absolute ${
            isSelected ? "bg-blue-500 ring-2 ring-blue-300" : statusStyle.color
          } w-5 h-5 rounded-full cursor-pointer transform -translate-x-1/2 -translate-y-1/2 transition-all hover:scale-125 hover:z-10`;
          marker.style.left = room.position.x;
          marker.style.top = room.position.y;
          marker.dataset.roomId = room.id;
          marker.title = `${room.name} (${room.id})`;

          marker.addEventListener("click", () => showRoomDetail(room.id));
          roomMarkers.appendChild(marker);
        });
      }

      // 渲染房间选择器
      function renderRoomSelector() {
        roomSelector.innerHTML = '<option value="">选择房间...</option>';

        rooms.forEach((room) => {
          const option = document.createElement("option");
          option.value = room.id;
          option.textContent = `${room.name} (${room.id})`;
          roomSelector.appendChild(option);
        });

        roomSelector.addEventListener("change", () => {
          if (roomSelector.value) {
            showRoomDetail(roomSelector.value);
          }
        });
      }

      // 渲染移动端房间列表
      function renderMobileRoomList() {
        mobileRoomList.innerHTML = "";

        rooms.forEach((room) => {
          const roomItem = document.createElement("div");
          roomItem.className =
            "bg-white text-gray-800 border border-gray-200 rounded-md p-2 text-center text-sm cursor-pointer hover:bg-gray-50 transition-colors";
          roomItem.dataset.roomId = room.id;
          roomItem.textContent = `${room.name} (${room.id})`;

          roomItem.addEventListener("click", () => {
            showRoomDetail(room.id);
            toggleMobileMenu();
          });

          mobileRoomList.appendChild(roomItem);
        });
      }

      // 显示房间详情
      function showRoomDetail(roomId) {
        const room = rooms.find((r) => r.id === roomId);
        if (!room) return;

        currentRoomId = roomId;

        // 更新标题
        roomDetailTitle.textContent = `${room.name} (${room.id})`;

        // 更新内容
        const statusStyle = statusStyles[room.status];

        // 房间详情页渲染逻辑
        roomDetailContent.innerHTML = `
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="md:col-span-2">
  <!-- 图片网格区域 -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 min-cols-1">
    ${room.image
      .map(
        (img, index) => `
      <div class="relative rounded-lg overflow-hidden group">
        <img 
          src="${img}" 
          alt="${room.name}-${index + 1}" 
          class="w-full aspect-[4/3] object-cover transition-transform duration-300 group-hover:scale-105"
        >
        ${
          room.image.length > 1 && index === 0
            ? `
          <div class="absolute top-2 left-2 bg-primary text-white text-xs px-2 py-1 rounded">
            主图
          </div>
        `
            : ""
        }
      </div>
    `
      )
      .join("")}
  </div>
  
  <!-- 房间介绍 -->
  <div class="bg-neutral p-4 rounded-lg">
    <h3 class="font-semibold text-lg mb-2">房间介绍</h3>
    <p class="text-gray-700">${room.description}</p>
  </div>
</div>
    </div>
                    
                    <div>
                        <div class="bg-neutral p-4 rounded-lg mb-4">
                            <h3 class="font-semibold text-lg mb-3 flex items-center">
                                <i class="fa fa-users mr-2 text-primary"></i>房间人员
                            </h3>
                            <div class="space-y-3">
                                ${room.people
                                  .map(
                                    (person) => `
                                    <div class="flex items-center">
                                        <img src="${person.avatar}" alt="${
                                      person.name
                                    }" class="w-10 h-10 rounded-full mr-3">
                                        <div>
                                            <div class="font-medium">${
                                              person.name
                                            }</div>
                                            <div class="text-sm text-gray-600">${
                                              person.role
                                            }</div>${
                                      person.tel !== null
                                        ? `
            <div class="text-xs text-gray-500">
              <i class="fa fa-phone mr-1"></i>${person.tel}
            </div>
          `
                                        : ""
                                    }
                                        </div>
                                    </div>
                                `
                                  )
                                  .join("")}
                            </div>
                        </div>
                        
                        <div class="bg-neutral p-4 rounded-lg">
                            <h3 class="font-semibold text-lg mb-3 flex items-center">
                                <i class="fa fa-map-marker mr-2 text-primary"></i>位置信息
                            </h3>
                            <div class="relative aspect-square rounded-lg overflow-hidden bg-gray-200">
                                <!-- 这里是简化的位置示意图，实际项目中可以使用更详细的地图 -->
                                <div class="absolute inset-0 bg-white/80 flex items-center justify-center">
                                    <div class="w-3/4 h-3/4 bg-gray-300 rounded-lg relative">
                                        <div class="absolute ${
                                          statusStyle.color
                                        } w-6 h-6 rounded-full flex items-center justify-center text-white text-xs"
                                            style="left: ${parseInt(
                                              room.position.x
                                            )}%; top: ${parseInt(
          room.position.y
        )}%; transform: translate(-50%, -50%)">
                                            ${room.id}
                                        </div>
                                    </div>
                                </div>
                                <div class="absolute bottom-2 left-2 right-2 text-center text-xs text-gray-600">
                                    济事楼4楼平面图（简化版）
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

        // 显示详情部分，隐藏其他部分
        roomDetailSection.classList.remove("hidden");
        document
          .getElementById("rooms-grid")
          .parentElement.classList.add("hidden");
        searchResultsSection.classList.add("hidden");

        // 更新房间列表和标记的选中状态
        renderRoomList();
        renderRoomMarkers();

        // // 滚动到详情部分
        // roomDetailSection.scrollIntoView({ behavior: "smooth" });
        // 滚动到顶部
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      // 显示总览
      function showOverview() {
        currentRoomId = null;
        roomSelector.value = "";

        // 显示总览部分，隐藏其他部分
        roomDetailSection.classList.add("hidden");
        document
          .getElementById("rooms-grid")
          .parentElement.classList.remove("hidden");
        searchResultsSection.classList.add("hidden");

        // 更新房间列表和标记的选中状态
        renderRoomList();
        renderRoomMarkers();

        // 滚动到顶部
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      // 执行搜索
      function performSearch() {
        const query = searchInput.value.trim().toLowerCase();
        if (!query) return;

        // 搜索结果
        const results = [];

        // 搜索房间
        rooms.forEach((room) => {
          if (
            room.id.toLowerCase().includes(query) ||
            room.name.toLowerCase().includes(query) ||
            room.description.toLowerCase().includes(query)
          ) {
            results.push({
              type: "room",
              item: room,
            });
          }

          // 搜索房间内的人员
          room.people.forEach((person) => {
            if (
              person.name.toLowerCase().includes(query) ||
              person.role.toLowerCase().includes(query)
            ) {
              results.push({
                type: "person",
                item: person,
                room: room,
              });
            }
          });
        });

        // 更新搜索结果标题
        searchResultsTitle.textContent = `搜索结果: "${query}" (${results.length}个结果)`;

        // 更新搜索结果内容
        if (results.length > 0) {
          searchResultsContent.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${results
                          .map((result) => {
                            if (result.type === "room") {
                              const room = result.item;
                              const statusStyle = statusStyles[room.status];

                              return `
                                    <div class="bg-white rounded-lg shadow-sm p-4 hover:shadow-md transition-shadow cursor-pointer" onclick="showRoomDetail('${room.id}')">
                                        <div class="flex items-start">
                                            <div class="w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center text-primary mr-3">
                                                <i class="fa fa-door-o text-xl"></i>
                                            </div>
                                            <div class="flex-grow">
                                                <h4 class="font-semibold">${room.name} (${room.id})</h4>
                                                <div class="text-xs ${statusStyle.color} px-2 py-0.5 rounded-full inline-block mb-1">
                                                    ${statusStyle.label}
                                                </div>
                                                <p class="text-sm text-gray-600 line-clamp-2">${room.description}</p>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            } else {
                              const person = result.item;
                              const room = result.room;

                              return `
                                    <div class="bg-white rounded-lg shadow-sm p-4 hover:shadow-md transition-shadow cursor-pointer" onclick="showRoomDetail('${room.id}')">
                                        <div class="flex items-start">
                                            <img src="${person.avatar}" alt="${person.name}" class="w-12 h-12 rounded-full mr-3">
                                            <div class="flex-grow">
                                                <h4 class="font-semibold">${person.name}</h4>
                                                <p class="text-sm text-gray-600">${person.role}</p>
                                                <div class="text-xs text-gray-500 mt-1">
                                                    <i class="fa fa-building-o mr-1"></i>${room.name} (${room.id})
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }
                          })
                          .join("")}
                    </div>
                `;
        } else {
          searchResultsContent.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fa fa-search text-gray-400 text-4xl mb-3"></i>
                        <p class="text-gray-600">没有找到与"${query}"相关的结果</p>
                        <p class="text-gray-400 text-sm mt-1">请尝试使用不同的关键词进行搜索</p>
                    </div>
                `;
        }

        // 显示搜索结果部分，隐藏其他部分
        searchResultsSection.classList.remove("hidden");
        document
          .getElementById("rooms-grid")
          .parentElement.classList.add("hidden");
        roomDetailSection.classList.add("hidden");

        // 滚动到搜索结果部分
        searchResultsSection.scrollIntoView({ behavior: "smooth" });
      }

      // 切换移动端菜单
      function toggleMobileMenu() {
        mobileMenu.classList.toggle("hidden");
      }

      // 页面加载完成后初始化
      document.addEventListener("DOMContentLoaded", initPage);
    </script>
  </body>
</html>
